{"remainingRequest":"F:\\TWINCODE\\twincode-front\\node_modules\\babel-loader\\lib\\index.js!F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\TWINCODE\\twincode-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\TWINCODE\\twincode-front\\src\\pages\\Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\TWINCODE\\twincode-front\\src\\pages\\Admin.vue","mtime":1625729624000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9IZWFkZXIiOwppbXBvcnQgQ2FyZCBmcm9tICIuLi9jb21wb25lbnRzL0NhcmQiOwppbXBvcnQgTmV3Q2FyZCBmcm9tICIuLi9jb21wb25lbnRzL05ld0NhcmQiOwppbXBvcnQgTW9kYWwgZnJvbSAiLi4vY29tcG9uZW50cy9Nb2RhbCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9nZ2VkSW46IGZhbHNlLAogICAgICBzZXNzaW9uczogbnVsbCwKICAgICAgc2VjcmV0OiBudWxsLAogICAgICBlcnJvcjogZmFsc2UsCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIG5ld1Nlc3Npb246IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICB0b2tlbnM6ICIiLAogICAgICAgIHRva2VuUGFpcmluZzogZmFsc2UsCiAgICAgICAgZXJyb3JzOiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXI6IEhlYWRlciwKICAgIENhcmQ6IENhcmQsCiAgICBOZXdDYXJkOiBOZXdDYXJkLAogICAgTW9kYWw6IE1vZGFsCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCJiZy1ncmF5LTgwMCIpOwogICAgdGhpcy5sb2dJbigpOwogIH0sCiAgbWV0aG9kczogewogICAgY3JlYXRlU2Vzc2lvbjogZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBzZXNzaW9uID0ge307CiAgICAgIHNlc3Npb24udG9rZW5zID0gdGhpcy5uZXdTZXNzaW9uLnRva2Vucy5zcGxpdCgiLCIpOwogICAgICBzZXNzaW9uLm5hbWUgPSB0aGlzLm5ld1Nlc3Npb24ubmFtZTsKICAgICAgc2Vzc2lvbi50b2tlblBhaXJpbmcgPSBmYWxzZTsKICAgICAgY29uc29sZS5sb2coc2Vzc2lvbik7CiAgICAgIGZldGNoKCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1RDX0FQSSwgIi9zZXNzaW9ucyIpLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogbG9jYWxTdG9yYWdlLmFkbWluU2VjcmV0LAogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbikKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgYWxlcnQoIlNlc3Npb24gY3JlYXRlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgIF90aGlzLnNob3dNb2RhbCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMubG9nSW4oKTsKCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5uZXdTZXNzaW9uLmVycm9ycyA9IHJlc3BvbnNlLmVycm9yTXNnOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMubmV3U2Vzc2lvbi5lcnJvcnMgPSBudWxsOwogICAgICAgIH0sIDUwMDApOwogICAgICB9KTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgbG9jYWxTdG9yYWdlLmFkbWluU2VjcmV0ID0gdGhpcy5zZWNyZXQ7CiAgICAgIHRoaXMubG9nSW4oKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFfdGhpczIubG9nZ2VkSW4pIHsKICAgICAgICAgIF90aGlzMi5lcnJvciA9IHRydWU7CgogICAgICAgICAgX3RoaXMyLiRyZWZzLmNvZGVJbnB1dC5jbGFzc0xpc3QuYWRkKCJlcnJvciIpOwoKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczIuJHJlZnMuY29kZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoImVycm9yIik7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGxvZ0luOiBmdW5jdGlvbiBsb2dJbigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBmZXRjaCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9UQ19BUEksICIvc2Vzc2lvbnMiKSwgewogICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogbG9jYWxTdG9yYWdlLmFkbWluU2VjcmV0CiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczMubG9nZ2VkSW4gPSB0cnVlOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJiZy1ncmF5LTgwMCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoanNvbikgewogICAgICAgIF90aGlzMy5zZXNzaW9ucyA9IGpzb247CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dOZXdTZXNzaW9uTW9kYWw6IGZ1bmN0aW9uIHNob3dOZXdTZXNzaW9uTW9kYWwoKSB7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <Header v-if=\"loggedIn\" />\n    <div v-if=\"loggedIn\" class=\"text-center\">\n      <div class=\"inline-block w-full max-w-screen-xl\">\n        <div class=\"text-left\">\n          <h1 class=\"p-5 text-2xl md:text-3xl md:ml-3 font-semibold\">\n            Available sessions\n          </h1>\n        </div>\n        <div class=\"grid sm:grid-cols-2 md:grid-cols-3 gap-10 p-5\">\n            <Card \n              v-for=\"(session, index) in sessions\"\n              :key=\"index\"\n              :environment=\"session.environment\"\n              :sessionName=\"session.name\"\n              :active=\"session.active\"\n              :registeredUsers=\"session.users.length\"\n            />\n          <NewCard @newSession=\"showNewSessionModal()\" />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"!loggedIn\">\n      <div class=\"flex flex-col items-center justify-center mt-6\">\n        <img src=\"@/assets/tc_white_color.png\" class=\"w-56\" />\n        <h1 class=\"font-light mt-2 text-white\">Administration console</h1>\n      </div>\n      <div class=\"container mx-auto max-w-sm px-3 mt-24\">\n        <div\n          class=\"bg-gray-200 p-10 pb-16 rounded-md shadow-lg border-gray-600 p-8 border-t-8\"\n          :class=\"error ? 'border-red-700' : 'border-gray-600'\"\n        >\n          <form @submit.prevent=\"onSubmit\">\n            <label\n              class=\"font-bold block mb-2 text-xl\"\n              :class=\"error ? 'text-red-600' : 'text-grey-800'\"\n              >Access</label\n            >\n            <input\n              ref=\"codeInput\"\n              type=\"password\"\n              v-model=\"secret\"\n              class=\"block appearance-none w-full bg-white border border-gray-200 hover:border-grey px-2 py-2 rounded shadow\"\n              placeholder=\"Enter the secret code\"\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n    <Modal v-model=\"showModal\" title=\"New session\">\n      <form @submit.prevent=\"createSession\">\n        <div class=\"mt-5\">\n          <label>Name:</label>\n          <input\n            v-model=\"newSession.name\"\n            type=\"text\"\n            class=\"border rounded-sm ml-2\"\n          />\n        </div>\n\n        <div class=\"mt-5\">\n          <label>Token list:</label>\n          <input\n            v-model=\"newSession.tokens\"\n            type=\"text\"\n            class=\"border rounded-sm ml-2\"\n          />\n        </div>\n      </form>\n      <div v-if=\"newSession.errors\" class=\"mb-5\">\n        <p class=\"text-red-700\">{{ this.newSession.errors }}</p>\n      </div>\n      <template v-slot:actionButtons>\n        <button\n          @click=\"createSession()\"\n          class=\"px-4 bg-transparent p-3 rounded-lg bg-orange-400 hover:bg-orange-300 mr-2 focus:outline-none focus:shadow-outline\"\n        >\n          Save &amp; go to exercise configuration\n        </button>\n      </template>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport Header from \"../components/Header\";\nimport Card from \"../components/Card\";\nimport NewCard from \"../components/NewCard\";\nimport Modal from \"../components/Modal\";\n\nexport default {\n  data() {\n    return {\n      loggedIn: false,\n      sessions: null,\n      secret: null,\n      error: false,\n      showModal: false,\n      newSession: {\n        name: \"\",\n        tokens: \"\",\n        tokenPairing: false,\n        errors: null,\n      },\n    };\n  },\n  components: {\n    Header,\n    Card,\n    NewCard,\n    Modal,\n  },\n  created() {\n    document.body.classList.add(\"bg-gray-800\");\n    this.logIn();\n  },\n  methods: {\n    createSession() {\n      let session = {};\n      session.tokens = this.newSession.tokens.split(\",\");\n      session.name = this.newSession.name;\n      session.tokenPairing = false;\n      console.log(session);\n      fetch(`${process.env.VUE_APP_TC_API}/sessions`, {\n        method: \"POST\",\n        headers: {\n          Authorization: localStorage.adminSecret,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(session),\n      })\n        .then((response) => {\n          if (response.status == 200) {\n            alert(\"Session created successfully\");\n            this.showModal = false;\n          }\n          this.logIn();\n          return response.json();\n        })\n        .then((response) => {\n          this.newSession.errors = response.errorMsg;\n          setTimeout(() => {\n            this.newSession.errors = null;\n          }, 5000);\n        });\n    },\n    onSubmit() {\n      localStorage.adminSecret = this.secret;\n      this.logIn();\n      setTimeout(() => {\n        if (!this.loggedIn) {\n          this.error = true;\n          this.$refs.codeInput.classList.add(\"error\");\n          setTimeout(() => {\n            this.$refs.codeInput.classList.remove(\"error\");\n          }, 1000);\n        }\n      }, 1000);\n    },\n    logIn() {\n      fetch(`${process.env.VUE_APP_TC_API}/sessions`, {\n        method: \"GET\",\n        headers: {\n          Authorization: localStorage.adminSecret,\n        },\n      })\n        .then((response) => {\n          if (response.status == 200) {\n            this.loggedIn = true;\n            document.body.classList.remove(\"bg-gray-800\");\n          }\n          return response.json();\n        })\n        .then((json) => {\n          this.sessions = json;\n        });\n    },\n    showNewSessionModal() {\n      this.showModal = true;\n    },\n  },\n};\n</script>\n\n<style>\n.error {\n  animation: shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n  perspective: 1000px;\n}\n\n@keyframes shake {\n  10%,\n  90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n\n  20%,\n  80% {\n    transform: translate3d(2px, 0, 0);\n  }\n\n  30%,\n  50%,\n  70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n\n  40%,\n  60% {\n    transform: translate3d(4px, 0, 0);\n  }\n}\n</style>\n"],"sourceRoot":"src/pages"}]}