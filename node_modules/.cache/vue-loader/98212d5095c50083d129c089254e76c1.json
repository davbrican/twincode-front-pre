{"remainingRequest":"F:\\TWINCODE\\twincode-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\TWINCODE\\twincode-front\\src\\pages\\Lobby.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\TWINCODE\\twincode-front\\src\\pages\\Lobby.vue","mtime":1625729624000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW52YWxpZFRva2VuOiBmYWxzZSwKICAgICAgd2FpdGluZ0ZvclBlZXI6IGZhbHNlLAogICAgICB0b2tlbklkOiAiIiwKICAgIH07CiAgfSwKICBzb2NrZXRzOiB7CiAgICBzZXNzaW9uU3RhcnQodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZXNzaW9uIHN0YXJ0ZWQhIik7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9yb29tcy9jb250cm9sbGVkLyIgKyB2YWwucm9vbTsKICAgICAgY29uc29sZS5sb2coIkNvbnZlcnRpbmcgdG8gc3RyaW5nOiAiICsgdmFsLnVzZXIpOwogICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh2YWwudXNlcikpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KHZhbC51c2VyKSk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwYWlyZWRUbyIsIHZhbC5wYWlyZWRUbyk7CiAgICB9LAogICAgY2xpZW50Sm9pbkFnYWluKCkgewogICAgICB0aGlzLnBlcmZvcm1Db25uZWN0aW9uKCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHNvY2tldC5jbGllbnQuaWQpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiZGVtb0V4ZXJjaXNlIik7CiAgICAgIGZldGNoKHByb2Nlc3MuZW52LlZVRV9BUFBfVENfQVBJICsgIi9yZWdpc3RlclVzZXIiLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgdG9rZW5JZDogdGhpcy50b2tlbklkLAogICAgICAgICAgY29kZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNvZGUiKSwKICAgICAgICB9KSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgIH0sCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIHRoaXMucGVyZm9ybUNvbm5lY3Rpb24oKTsKICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSA0MDQpIHsKICAgICAgICAgIHRoaXMuaW52YWxpZFRva2VuID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHBlcmZvcm1Db25uZWN0aW9uKCkgewogICAgICBjb25zb2xlLmxvZygiUGVyZm9ybWluZyBjb25uZWN0aW9uLi4uIik7CiAgICAgIHRoaXMuJHNvY2tldC5jbGllbnQuZW1pdCgiY2xpZW50UmVhZHkiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY29kZSIpKTsKICAgICAgdGhpcy4kc29ja2V0LmNsaWVudC5lbWl0KCJjbGllbnRDb25uZWN0ZWQiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY29kZSIpKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNvZGUiKSk7CiAgICAgIHRoaXMud2FpdGluZ0ZvclBlZXIgPSB0cnVlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Lobby.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Lobby.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"bg-red-100 h-screen font-sans\">\n    <div class=\"container mx-auto h-full flex justify-center items-center\">\n      <div class=\"w-1/3\">\n        <h1 class=\"mb-6 text-center font-hairline text-3xl\">\n          Lobby\n        </h1>\n        <div\n          v-if=\"!waitingForPeer\"\n          class=\"border-red-600 p-8 border-t-8 bg-white mb-6 rounded-md shadow-md\"\n        >\n          <div\n            v-if=\"invalidToken\"\n            class=\"bg-red-200 border-red-300 border mb-6 rounded\"\n          >\n            <p class=\"text-red-800 text-sm p-2\">\n              Invalid token. Check for typos and ask your session coordinatos if\n              you think it is an error.\n            </p>\n          </div>\n          <form @submit.prevent=\"onSubmit\">\n            <div class=\"mb-6\">\n              <label class=\"font-bold text-grey-800 block mb-2\"\n                >Introduce the token provided by the session coordinator</label\n              >\n              <input\n                type=\"text\"\n                v-model=\"tokenId\"\n                class=\"block appearance-none w-full bg-white border border-gray-200 hover:border-grey px-2 py-2 rounded shadow\"\n                placeholder=\"Type here the token\"\n              />\n            </div>\n\n            <div class=\"flex items-center justify-between\">\n              <button\n                type=\"submit\"\n                class=\"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded\"\n              >\n                Continue\n              </button>\n            </div>\n          </form>\n        </div>\n        <div v-if=\"waitingForPeer\">\n          <h1 class=\"mb-6 text-center text-3xl\">\n            Waiting for peer\n          </h1>\n        </div>\n\n        <div v-if=\"waitingForPeer\" class=\"mb-6\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            style=\"\n              margin: auto;\n              display: block;\n              background-position: initial initial;\n              background-repeat: initial initial;\n            \"\n            width=\"200px\"\n            height=\"200px\"\n            viewBox=\"0 0 100 100\"\n            preserveAspectRatio=\"xMidYMid\"\n          >\n            <circle\n              cx=\"50\"\n              cy=\"50\"\n              r=\"0\"\n              fill=\"none\"\n              stroke=\"#e53e3e\"\n              stroke-width=\"2\"\n            >\n              <animate\n                attributeName=\"r\"\n                repeatCount=\"indefinite\"\n                dur=\"1.6393442622950818s\"\n                values=\"0;40\"\n                keyTimes=\"0;1\"\n                keySplines=\"0 0.2 0.8 1\"\n                calcMode=\"spline\"\n                begin=\"-0.8196721311475409s\"\n              ></animate>\n              <animate\n                attributeName=\"opacity\"\n                repeatCount=\"indefinite\"\n                dur=\"1.6393442622950818s\"\n                values=\"1;0\"\n                keyTimes=\"0;1\"\n                keySplines=\"0.2 0 0.8 1\"\n                calcMode=\"spline\"\n                begin=\"-0.8196721311475409s\"\n              ></animate>\n            </circle>\n            <circle\n              cx=\"50\"\n              cy=\"50\"\n              r=\"0\"\n              fill=\"none\"\n              stroke=\"#f5c61b\"\n              stroke-width=\"2\"\n            >\n              <animate\n                attributeName=\"r\"\n                repeatCount=\"indefinite\"\n                dur=\"1.6393442622950818s\"\n                values=\"0;40\"\n                keyTimes=\"0;1\"\n                keySplines=\"0 0.2 0.8 1\"\n                calcMode=\"spline\"\n              ></animate>\n              <animate\n                attributeName=\"opacity\"\n                repeatCount=\"indefinite\"\n                dur=\"1.6393442622950818s\"\n                values=\"1;0\"\n                keyTimes=\"0;1\"\n                keySplines=\"0.2 0 0.8 1\"\n                calcMode=\"spline\"\n              ></animate>\n            </circle>\n          </svg>\n        </div>\n\n        <div class=\"text-center\">\n          <p class=\"text-grey-dark text-sm\">Universidad de Sevilla</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      invalidToken: false,\n      waitingForPeer: false,\n      tokenId: \"\",\n    };\n  },\n  sockets: {\n    sessionStart(val) {\n      console.log(\"Session started!\");\n      window.location.href = \"/rooms/controlled/\" + val.room;\n      console.log(\"Converting to string: \" + val.user);\n      console.log(JSON.stringify(val.user));\n      localStorage.setItem(\"user\", JSON.stringify(val.user));\n      localStorage.setItem(\"pairedTo\", val.pairedTo);\n    },\n    clientJoinAgain() {\n      this.performConnection();\n    },\n  },\n  methods: {\n    onSubmit() {\n      console.log(this.$socket.client.id);\n      localStorage.removeItem(\"demoExercise\");\n      fetch(process.env.VUE_APP_TC_API + \"/registerUser\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          tokenId: this.tokenId,\n          code: localStorage.getItem(\"code\"),\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((response) => {\n        if (response.status == 200) {\n          this.performConnection();\n        } else if (response.status == 404) {\n          this.invalidToken = true;\n        }\n      });\n    },\n    performConnection() {\n      console.log(\"Performing connection...\");\n      this.$socket.client.emit(\"clientReady\", localStorage.getItem(\"code\"));\n      this.$socket.client.emit(\"clientConnected\", localStorage.getItem(\"code\"));\n      localStorage.setItem(\"token\", localStorage.getItem(\"code\"));\n      this.waitingForPeer = true;\n    },\n  },\n};\n</script>\n\n<style></style>\n"]}]}