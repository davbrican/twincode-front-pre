{"remainingRequest":"F:\\TWINCODE\\twincode-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\TWINCODE\\twincode-front\\src\\pages\\Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\TWINCODE\\twincode-front\\src\\pages\\Admin.vue","mtime":1625729624000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TWINCODE\\twincode-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9IZWFkZXIiOwppbXBvcnQgQ2FyZCBmcm9tICIuLi9jb21wb25lbnRzL0NhcmQiOwppbXBvcnQgTmV3Q2FyZCBmcm9tICIuLi9jb21wb25lbnRzL05ld0NhcmQiOwppbXBvcnQgTW9kYWwgZnJvbSAiLi4vY29tcG9uZW50cy9Nb2RhbCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvZ2dlZEluOiBmYWxzZSwKICAgICAgc2Vzc2lvbnM6IG51bGwsCiAgICAgIHNlY3JldDogbnVsbCwKICAgICAgZXJyb3I6IGZhbHNlLAogICAgICBzaG93TW9kYWw6IGZhbHNlLAogICAgICBuZXdTZXNzaW9uOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgdG9rZW5zOiAiIiwKICAgICAgICB0b2tlblBhaXJpbmc6IGZhbHNlLAogICAgICAgIGVycm9yczogbnVsbCwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXIsCiAgICBDYXJkLAogICAgTmV3Q2FyZCwKICAgIE1vZGFsLAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgiYmctZ3JheS04MDAiKTsKICAgIHRoaXMubG9nSW4oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVNlc3Npb24oKSB7CiAgICAgIGxldCBzZXNzaW9uID0ge307CiAgICAgIHNlc3Npb24udG9rZW5zID0gdGhpcy5uZXdTZXNzaW9uLnRva2Vucy5zcGxpdCgiLCIpOwogICAgICBzZXNzaW9uLm5hbWUgPSB0aGlzLm5ld1Nlc3Npb24ubmFtZTsKICAgICAgc2Vzc2lvbi50b2tlblBhaXJpbmcgPSBmYWxzZTsKICAgICAgY29uc29sZS5sb2coc2Vzc2lvbik7CiAgICAgIGZldGNoKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfVENfQVBJfS9zZXNzaW9uc2AsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiBsb2NhbFN0b3JhZ2UuYWRtaW5TZWNyZXQsCiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbiksCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICBhbGVydCgiU2Vzc2lvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5sb2dJbigpOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5uZXdTZXNzaW9uLmVycm9ycyA9IHJlc3BvbnNlLmVycm9yTXNnOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubmV3U2Vzc2lvbi5lcnJvcnMgPSBudWxsOwogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgb25TdWJtaXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5hZG1pblNlY3JldCA9IHRoaXMuc2VjcmV0OwogICAgICB0aGlzLmxvZ0luKCk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICghdGhpcy5sb2dnZWRJbikgewogICAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgICB0aGlzLiRyZWZzLmNvZGVJbnB1dC5jbGFzc0xpc3QuYWRkKCJlcnJvciIpOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuY29kZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoImVycm9yIik7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGxvZ0luKCkgewogICAgICBmZXRjaChgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1RDX0FQSX0vc2Vzc2lvbnNgLCB7CiAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiBsb2NhbFN0b3JhZ2UuYWRtaW5TZWNyZXQsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMubG9nZ2VkSW4gPSB0cnVlOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoImJnLWdyYXktODAwIik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKGpzb24pID0+IHsKICAgICAgICAgIHRoaXMuc2Vzc2lvbnMgPSBqc29uOwogICAgICAgIH0pOwogICAgfSwKICAgIHNob3dOZXdTZXNzaW9uTW9kYWwoKSB7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Admin.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <Header v-if=\"loggedIn\" />\n    <div v-if=\"loggedIn\" class=\"text-center\">\n      <div class=\"inline-block w-full max-w-screen-xl\">\n        <div class=\"text-left\">\n          <h1 class=\"p-5 text-2xl md:text-3xl md:ml-3 font-semibold\">\n            Available sessions\n          </h1>\n        </div>\n        <div class=\"grid sm:grid-cols-2 md:grid-cols-3 gap-10 p-5\">\n            <Card \n              v-for=\"(session, index) in sessions\"\n              :key=\"index\"\n              :environment=\"session.environment\"\n              :sessionName=\"session.name\"\n              :active=\"session.active\"\n              :registeredUsers=\"session.users.length\"\n            />\n          <NewCard @newSession=\"showNewSessionModal()\" />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"!loggedIn\">\n      <div class=\"flex flex-col items-center justify-center mt-6\">\n        <img src=\"@/assets/tc_white_color.png\" class=\"w-56\" />\n        <h1 class=\"font-light mt-2 text-white\">Administration console</h1>\n      </div>\n      <div class=\"container mx-auto max-w-sm px-3 mt-24\">\n        <div\n          class=\"bg-gray-200 p-10 pb-16 rounded-md shadow-lg border-gray-600 p-8 border-t-8\"\n          :class=\"error ? 'border-red-700' : 'border-gray-600'\"\n        >\n          <form @submit.prevent=\"onSubmit\">\n            <label\n              class=\"font-bold block mb-2 text-xl\"\n              :class=\"error ? 'text-red-600' : 'text-grey-800'\"\n              >Access</label\n            >\n            <input\n              ref=\"codeInput\"\n              type=\"password\"\n              v-model=\"secret\"\n              class=\"block appearance-none w-full bg-white border border-gray-200 hover:border-grey px-2 py-2 rounded shadow\"\n              placeholder=\"Enter the secret code\"\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n    <Modal v-model=\"showModal\" title=\"New session\">\n      <form @submit.prevent=\"createSession\">\n        <div class=\"mt-5\">\n          <label>Name:</label>\n          <input\n            v-model=\"newSession.name\"\n            type=\"text\"\n            class=\"border rounded-sm ml-2\"\n          />\n        </div>\n\n        <div class=\"mt-5\">\n          <label>Token list:</label>\n          <input\n            v-model=\"newSession.tokens\"\n            type=\"text\"\n            class=\"border rounded-sm ml-2\"\n          />\n        </div>\n      </form>\n      <div v-if=\"newSession.errors\" class=\"mb-5\">\n        <p class=\"text-red-700\">{{ this.newSession.errors }}</p>\n      </div>\n      <template v-slot:actionButtons>\n        <button\n          @click=\"createSession()\"\n          class=\"px-4 bg-transparent p-3 rounded-lg bg-orange-400 hover:bg-orange-300 mr-2 focus:outline-none focus:shadow-outline\"\n        >\n          Save &amp; go to exercise configuration\n        </button>\n      </template>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport Header from \"../components/Header\";\nimport Card from \"../components/Card\";\nimport NewCard from \"../components/NewCard\";\nimport Modal from \"../components/Modal\";\n\nexport default {\n  data() {\n    return {\n      loggedIn: false,\n      sessions: null,\n      secret: null,\n      error: false,\n      showModal: false,\n      newSession: {\n        name: \"\",\n        tokens: \"\",\n        tokenPairing: false,\n        errors: null,\n      },\n    };\n  },\n  components: {\n    Header,\n    Card,\n    NewCard,\n    Modal,\n  },\n  created() {\n    document.body.classList.add(\"bg-gray-800\");\n    this.logIn();\n  },\n  methods: {\n    createSession() {\n      let session = {};\n      session.tokens = this.newSession.tokens.split(\",\");\n      session.name = this.newSession.name;\n      session.tokenPairing = false;\n      console.log(session);\n      fetch(`${process.env.VUE_APP_TC_API}/sessions`, {\n        method: \"POST\",\n        headers: {\n          Authorization: localStorage.adminSecret,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(session),\n      })\n        .then((response) => {\n          if (response.status == 200) {\n            alert(\"Session created successfully\");\n            this.showModal = false;\n          }\n          this.logIn();\n          return response.json();\n        })\n        .then((response) => {\n          this.newSession.errors = response.errorMsg;\n          setTimeout(() => {\n            this.newSession.errors = null;\n          }, 5000);\n        });\n    },\n    onSubmit() {\n      localStorage.adminSecret = this.secret;\n      this.logIn();\n      setTimeout(() => {\n        if (!this.loggedIn) {\n          this.error = true;\n          this.$refs.codeInput.classList.add(\"error\");\n          setTimeout(() => {\n            this.$refs.codeInput.classList.remove(\"error\");\n          }, 1000);\n        }\n      }, 1000);\n    },\n    logIn() {\n      fetch(`${process.env.VUE_APP_TC_API}/sessions`, {\n        method: \"GET\",\n        headers: {\n          Authorization: localStorage.adminSecret,\n        },\n      })\n        .then((response) => {\n          if (response.status == 200) {\n            this.loggedIn = true;\n            document.body.classList.remove(\"bg-gray-800\");\n          }\n          return response.json();\n        })\n        .then((json) => {\n          this.sessions = json;\n        });\n    },\n    showNewSessionModal() {\n      this.showModal = true;\n    },\n  },\n};\n</script>\n\n<style>\n.error {\n  animation: shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n  perspective: 1000px;\n}\n\n@keyframes shake {\n  10%,\n  90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n\n  20%,\n  80% {\n    transform: translate3d(2px, 0, 0);\n  }\n\n  30%,\n  50%,\n  70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n\n  40%,\n  60% {\n    transform: translate3d(4px, 0, 0);\n  }\n}\n</style>\n"]}]}